<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceClone Pro - Advanced Voice Cloning & TTS</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --dark-bg: #1a1a2e;
            --darker-bg: #16213e;
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-light: #ffffff;
            --text-muted: #b8c6db;
            --accent: #00d4ff;
            --success: #4ecdc4;
            --warning: #feca57;
            --danger: #ff6b6b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-light);
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 3.5rem;
            background: linear-gradient(45deg, #00d4ff, #ff6b6b, #feca57);
            background-size: 200% 200%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
            margin-bottom: 10px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .feature-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tab-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            padding: 15px 30px;
            margin: 0 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .tab-btn.active, .tab-btn:hover {
            background: var(--secondary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-light);
        }

        input[type="file"], select, textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        input[type="file"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        .btn {
            background: var(--secondary-gradient);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: var(--primary-gradient);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #2ecc71);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #e74c3c);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #f39c12);
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }

        .audio-controls {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .waveform {
            width: 100%;
            height: 60px;
            background: linear-gradient(45deg, var(--accent), var(--success));
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }

        .wave-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2));
            animation: wave 2s linear infinite;
        }

        @keyframes wave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--secondary-gradient);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .slider-control {
            margin: 15px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 212, 255, 0.5);
        }

        .voice-library {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .voice-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .voice-card:hover, .voice-card.selected {
            background: var(--secondary-gradient);
            transform: scale(1.05);
            border-color: var(--accent);
        }

        .voice-preview {
            width: 50px;
            height: 50px;
            margin: 0 auto 15px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .status-indicator {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px 0;
        }

        .status-ready {
            background: rgba(78, 205, 196, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-processing {
            background: rgba(254, 202, 87, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-error {
            background: rgba(255, 107, 107, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, var(--accent), transparent);
            border-radius: 50%;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .analytics-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .metric-label {
            color: var(--text-muted);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .feature-tabs {
                flex-direction: column;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        .loading-spinner {
            display: none;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-microphone-alt"></i> VoiceClone Pro</h1>
            <p class="subtitle">Advanced AI-Powered Voice Cloning & Text-to-Speech Platform</p>
            <div class="analytics-panel">
                <div class="metric-card">
                    <div class="metric-value" id="totalClones">0</div>
                    <div class="metric-label">Voice Clones</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalAudio">0</div>
                    <div class="metric-label">Audio Generated</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="activeVoices">12</div>
                    <div class="metric-label">Active Voices</div>
                </div>
            </div>
        </header>

        <div class="feature-tabs">
            <button class="tab-btn active" data-tab="tts"><i class="fas fa-volume-up"></i> Text-to-Speech</button>
            <button class="tab-btn" data-tab="clone"><i class="fas fa-copy"></i> Voice Cloning</button>
            <button class="tab-btn" data-tab="library"><i class="fas fa-book"></i> Voice Library</button>
            <button class="tab-btn" data-tab="settings"><i class="fas fa-cog"></i> Advanced Settings</button>
        </div>

        <!-- Text-to-Speech Tab -->
        <div class="tab-content active" id="tts">
            <div class="card">
                <h2 class="section-title"><i class="fas fa-keyboard"></i> Text-to-Speech Engine</h2>
                <div class="input-group">
                    <label for="ttsText">Enter text to synthesize:</label>
                    <textarea id="ttsText" placeholder="Type or paste your text here... You can include SSML tags for advanced control over pronunciation, pauses, and emphasis.">Welcome to VoiceClone Pro! This is a demonstration of our advanced text-to-speech capabilities with natural-sounding voice synthesis.</textarea>
                </div>
                
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="voiceSelect">Select Voice:</label>
                        <select id="voiceSelect">
                            <option value="">Choose a voice...</option>
                        </select>
                    </div>
                    
                    <div class="slider-control">
                        <label>Speech Rate: <span id="rateValue">1.0</span></label>
                        <input type="range" class="slider" id="rateSlider" min="0.1" max="3.0" step="0.1" value="1.0">
                    </div>
                    
                    <div class="slider-control">
                        <label>Pitch: <span id="pitchValue">1.0</span></label>
                        <input type="range" class="slider" id="pitchSlider" min="0.1" max="2.0" step="0.1" value="1.0">
                    </div>
                    
                    <div class="slider-control">
                        <label>Volume: <span id="volumeValue">1.0</span></label>
                        <input type="range" class="slider" id="volumeSlider" min="0.0" max="1.0" step="0.1" value="1.0">
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" id="synthesizeBtn"><i class="fas fa-play"></i> Synthesize Speech</button>
                    <button class="btn btn-success" id="playBtn" disabled><i class="fas fa-play"></i> Play</button>
                    <button class="btn btn-warning" id="pauseBtn" disabled><i class="fas fa-pause"></i> Pause</button>
                    <button class="btn btn-danger" id="stopBtn" disabled><i class="fas fa-stop"></i> Stop</button>
                    <button class="btn" id="downloadBtn" disabled><i class="fas fa-download"></i> Download</button>
                </div>

                <div class="loading-spinner" id="loadingSpinner"></div>

                <div class="audio-controls">
                    <div class="waveform">
                        <div class="wave-animation" id="waveAnimation" style="display: none;"></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="audioProgress"></div>
                    </div>
                    <div class="status-indicator status-ready" id="statusIndicator">Ready</div>
                </div>
            </div>
        </div>

        <!-- Voice Cloning Tab -->
        <div class="tab-content" id="clone">
            <div class="card">
                <h2 class="section-title"><i class="fas fa-microphone"></i> Voice Cloning Studio</h2>
                <div class="input-group">
                    <label for="voiceUpload">Upload Audio Sample (minimum 30 seconds recommended):</label>
                    <input type="file" id="voiceUpload" accept=".wav,.mp3,.ogg,.m4a" multiple>
                    <small style="color: var(--text-muted); margin-top: 10px; display: block;">
                        Supported formats: WAV, MP3, OGG, M4A. For best results, use high-quality audio with minimal background noise.
                    </small>
                </div>

                <div class="input-group">
                    <label for="voiceName">Voice Model Name:</label>
                    <input type="text" id="voiceName" placeholder="Enter a name for your voice model" style="padding: 15px; border-radius: 10px; border: 2px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; width: 100%;">
                </div>

                <div class="settings-grid">
                    <div class="input-group">
                        <label for="cloneQuality">Quality Setting:</label>
                        <select id="cloneQuality">
                            <option value="draft">Draft (Fast)</option>
                            <option value="standard" selected>Standard (Balanced)</option>
                            <option value="high">High (Slow)</option>
                            <option value="premium">Premium (Very Slow)</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="languageModel">Language Model:</label>
                        <select id="languageModel">
                            <option value="en-US">English (US)</option>
                            <option value="en-GB">English (UK)</option>
                            <option value="es-ES">Spanish</option>
                            <option value="fr-FR">French</option>
                            <option value="de-DE">German</option>
                            <option value="it-IT">Italian</option>
                            <option value="pt-BR">Portuguese</option>
                            <option value="zh-CN">Chinese (Mandarin)</option>
                            <option value="ja-JP">Japanese</option>
                            <option value="ko-KR">Korean</option>
                        </select>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" id="startCloneBtn"><i class="fas fa-magic"></i> Start Cloning Process</button>
                    <button class="btn btn-danger" id="cancelCloneBtn" disabled><i class="fas fa-times"></i> Cancel</button>
                </div>

                <div class="loading-spinner" id="cloneLoadingSpinner"></div>

                <div class="audio-controls">
                    <div class="progress-bar">
                        <div class="progress" id="cloneProgress"></div>
                    </div>
                    <div class="status-indicator status-ready" id="cloneStatusIndicator">Ready to clone</div>
                </div>
            </div>
        </div>

        <!-- Voice Library Tab -->
        <div class="tab-content" id="library">
            <div class="card">
                <h2 class="section-title"><i class="fas fa-library"></i> Voice Library</h2>
                <div class="voice-library" id="voiceLibrary">
                    <!-- Voice cards will be populated here -->
                </div>
            </div>
        </div>

        <!-- Advanced Settings Tab -->
        <div class="tab-content" id="settings">
            <div class="card">
                <h2 class="section-title"><i class="fas fa-sliders-h"></i> Advanced Audio Settings</h2>
                
                <div class="settings-grid">
                    <div class="slider-control">
                        <label>Neural Enhancement: <span id="enhancementValue">0.5</span></label>
                        <input type="range" class="slider" id="enhancementSlider" min="0" max="1" step="0.1" value="0.5">
                    </div>
                    
                    <div class="slider-control">
                        <label>Emotion Intensity: <span id="emotionValue">0.3</span></label>
                        <input type="range" class="slider" id="emotionSlider" min="0" max="1" step="0.1" value="0.3">
                    </div>
                    
                    <div class="slider-control">
                        <label>Breathing Effects: <span id="breathingValue">0.2</span></label>
                        <input type="range" class="slider" id="breathingSlider" min="0" max="1" step="0.1" value="0.2">
                    </div>
                    
                    <div class="slider-control">
                        <label>Background Noise: <span id="noiseValue">0.0</span></label>
                        <input type="range" class="slider" id="noiseSlider" min="0" max="0.5" step="0.05" value="0.0">
                    </div>
                </div>

                <div class="input-group">
                    <label for="outputFormat">Output Format:</label>
                    <select id="outputFormat">
                        <option value="mp3">MP3 (Compressed)</option>
                        <option value="wav" selected>WAV (Uncompressed)</option>
                        <option value="ogg">OGG Vorbis</option>
                        <option value="flac">FLAC (Lossless)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="sampleRate">Sample Rate:</label>
                    <select id="sampleRate">
                        <option value="16000">16 kHz (Phone Quality)</option>
                        <option value="22050">22.05 kHz (Radio Quality)</option>
                        <option value="44100" selected>44.1 kHz (CD Quality)</option>
                        <option value="48000">48 kHz (Professional)</option>
                        <option value="96000">96 kHz (High Resolution)</option>
                    </select>
                </div>

                <div class="controls">
                    <button class="btn btn-success" id="saveSettingsBtn"><i class="fas fa-save"></i> Save Settings</button>
                    <button class="btn btn-warning" id="resetSettingsBtn"><i class="fas fa-undo"></i> Reset to Default</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentAudio = null;
        let speechSynthesis = window.speechSynthesis;
        let voices = [];
        let audioContext = null;
        let isPlaying = false;
        let clonedVoices = [];
        let settings = {
            enhancement: 0.5,
            emotion: 0.3,
            breathing: 0.2,
            noise: 0.0,
            format: 'wav',
            sampleRate: 44100
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            createFloatingParticles();
            loadVoices();
            setupEventListeners();
            populateVoiceLibrary();
            updateMetrics();
        });

        function initializeApp() {
            console.log('VoiceClone Pro initialized');
            
            // Initialize AudioContext
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (error) {
                console.warn('AudioContext not supported:', error);
            }
        }

        function createFloatingParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 20;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 10 + 5;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        function loadVoices() {
            const voiceSelect = document.getElementById('voiceSelect');
            
            function populateVoices() {
                voices = speechSynthesis.getVoices();
                voiceSelect.innerHTML = '<option value="">Choose a voice...</option>';
                
                voices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                });
            }

            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = populateVoices;
            }
            populateVoices();
        }

        function setupEventListeners() {
            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });

            // TTS Controls
            document.getElementById('synthesizeBtn').addEventListener('click', synthesizeSpeech);
            document.getElementById('playBtn').addEventListener('click', playAudio);
            document.getElementById('pauseBtn').addEventListener('click', pauseAudio);
            document.getElementById('stopBtn').addEventListener('click', stopAudio);
            document.getElementById('downloadBtn').addEventListener('click', downloadAudio);

            // Voice Cloning
            document.getElementById('startCloneBtn').addEventListener('click', startVoiceCloning);
            document.getElementById('cancelCloneBtn').addEventListener('click', cancelVoiceCloning);

            // Settings
            document.getElementById('saveSettingsBtn').addEventListener('click', saveSettings);
            document.getElementById('resetSettingsBtn').addEventListener('click', resetSettings);

            // Sliders
            setupSliderListeners();
        }

        function setupSliderListeners() {
            const sliders = [
                { id: 'rateSlider', valueId: 'rateValue' },
                { id: 'pitchSlider', valueId: 'pitchValue' },
                { id: 'volumeSlider', valueId: 'volumeValue' },
                { id: 'enhancementSlider', valueId: 'enhancementValue' },
                { id: 'emotionSlider', valueId: 'emotionValue' },
                { id: 'breathingSlider', valueId: 'breathingValue' },
                { id: 'noiseSlider', valueId: 'noiseValue' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueDisplay = document.getElementById(slider.valueId);
                
                element.addEventListener('input', function() {
                    valueDisplay.textContent = this.value;
                });
            });
        }

        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        }

        function synthesizeSpeech() {
            const text = document.getElementById('ttsText').value;
            const voiceSelect = document.getElementById('voiceSelect');
            const selectedVoice = voices[voiceSelect.value];
            
            if (!text.trim()) {
                showStatus('Please enter text to synthesize', 'error');
                return;
            }

            showStatus('Synthesizing speech...', 'processing');
            showLoading(true);

            // Cancel any ongoing speech
            speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            
            if (selectedVoice) {
                utterance.voice = selectedVoice;
            }
            
            utterance.rate = parseFloat(document.getElementById('rateSlider').value);
            utterance.pitch = parseFloat(document.getElementById('pitchSlider').value);
            utterance.volume = parseFloat(document.getElementById('volumeSlider').value);

            utterance.onstart = function() {
                showStatus('Speaking...', 'processing');
                enableAudioControls(true);
                showWaveAnimation(true);
                updateProgress(0);
            };

            utterance.onend = function() {
                showStatus('Speech completed', 'ready');
                enableAudioControls(false);
                showWaveAnimation(false);
                showLoading(false);
                updateProgress(100);
                updateMetrics();
            };

            utterance.onerror = function(event) {
                showStatus(`Error: ${event.error}`, 'error');
                showLoading(false);
                enableAudioControls(false);
                showWaveAnimation(false);
            };

            // Simulate progress for better UX
            let progress = 0;
            const progressInterval = setInterval(() => {
                if (progress < 90) {
                    progress += Math.random() * 10;
                    updateProgress(Math.min(progress, 90));
                } else {
                    clearInterval(progressInterval);
                }
            }, 100);

            speechSynthesis.speak(utterance);
            currentAudio = utterance;
        }

        function playAudio() {
            if (speechSynthesis.paused) {
                speechSynthesis.resume();
                showStatus('Resuming...', 'processing');
                showWaveAnimation(true);
            } else if (currentAudio) {
                speechSynthesis.speak(currentAudio);
                showStatus('Playing...', 'processing');
                showWaveAnimation(true);
            }
        }

        function pauseAudio() {
            if (speechSynthesis.speaking && !speechSynthesis.paused) {
                speechSynthesis.pause();
                showStatus('Paused', 'ready');
                showWaveAnimation(false);
            }
        }

        function stopAudio() {
            speechSynthesis.cancel();
            showStatus('Stopped', 'ready');
            enableAudioControls(false);
            showWaveAnimation(false);
            updateProgress(0);
        }

        function downloadAudio() {
            // Simulate audio download
            showStatus('Preparing download...', 'processing');
            
            setTimeout(() => {
                const text = document.getElementById('ttsText').value;
                const blob = new Blob([`Audio content for: ${text}`], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `speech_${Date.now()}.${settings.format}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showStatus('Download started', 'ready');
            }, 1000);
        }

        function startVoiceCloning() {
            const fileInput = document.getElementById('voiceUpload');
            const voiceName = document.getElementById('voiceName').value;
            const quality = document.getElementById('cloneQuality').value;
            
            if (!fileInput.files.length) {
                showCloneStatus('Please upload audio files', 'error');
                return;
            }
            
            if (!voiceName.trim()) {
                showCloneStatus('Please enter a voice model name', 'error');
                return;
            }

            showCloneStatus('Starting voice analysis...', 'processing');
            showCloneLoading(true);
            document.getElementById('startCloneBtn').disabled = true;
            document.getElementById('cancelCloneBtn').disabled = false;

            // Simulate voice cloning process
            let progress = 0;
            const stages = [
                'Analyzing audio quality...',
                'Extracting vocal characteristics...',
                'Training neural network...',
                'Optimizing voice model...',
                'Finalizing clone...'
            ];
            
            let stageIndex = 0;
            const cloneInterval = setInterval(() => {
                progress += Math.random() * 15 + 5;
                
                if (stageIndex < stages.length && progress > (stageIndex + 1) * 20) {
                    showCloneStatus(stages[stageIndex], 'processing');
                    stageIndex++;
                }
                
                updateCloneProgress(Math.min(progress, 95));
                
                if (progress >= 95) {
                    clearInterval(cloneInterval);
                    finishVoiceCloning(voiceName, quality);
                }
            }, 800);
        }

        function finishVoiceCloning(voiceName, quality) {
            setTimeout(() => {
                updateCloneProgress(100);
                showCloneStatus('Voice clone completed successfully!', 'ready');
                showCloneLoading(false);
                
                // Add to cloned voices
                const newVoice = {
                    id: Date.now(),
                    name: voiceName,
                    quality: quality,
                    created: new Date().toLocaleDateString(),
                    language: document.getElementById('languageModel').value
                };
                
                clonedVoices.push(newVoice);
                populateVoiceLibrary();
                updateMetrics();
                
                document.getElementById('startCloneBtn').disabled = false;
                document.getElementById('cancelCloneBtn').disabled = true;
                
                // Reset form
                document.getElementById('voiceUpload').value = '';
                document.getElementById('voiceName').value = '';
                updateCloneProgress(0);
            }, 1000);
        }

        function cancelVoiceCloning() {
            showCloneStatus('Cloning cancelled', 'error');
            showCloneLoading(false);
            document.getElementById('startCloneBtn').disabled = false;
            document.getElementById('cancelCloneBtn').disabled = true;
            updateCloneProgress(0);
        }

        function populateVoiceLibrary() {
            const library = document.getElementById('voiceLibrary');
            
            // Default voices
            const defaultVoices = [
                { name: 'Sarah', type: 'Female', language: 'English', accent: 'American' },
                { name: 'David', type: 'Male', language: 'English', accent: 'British' },
                { name: 'Maria', type: 'Female', language: 'Spanish', accent: 'European' },
                { name: 'Jean', type: 'Male', language: 'French', accent: 'Parisian' },
                { name: 'Anna', type: 'Female', language: 'German', accent: 'Standard' },
                { name: 'Kenji', type: 'Male', language: 'Japanese', accent: 'Tokyo' },
                { name: 'Li Wei', type: 'Female', language: 'Chinese', accent: 'Mandarin' },
                { name: 'Alessandro', type: 'Male', language: 'Italian', accent: 'Roman' }
            ];

            library.innerHTML = '';

            // Add default voices
            defaultVoices.forEach(voice => {
                const card = createVoiceCard(voice, false);
                library.appendChild(card);
            });

            // Add cloned voices
            clonedVoices.forEach(voice => {
                const card = createVoiceCard(voice, true);
                library.appendChild(card);
            });
        }

        function createVoiceCard(voice, isCloned = false) {
            const card = document.createElement('div');
            card.className = 'voice-card';
            
            const icon = isCloned ? 'fas fa-user-circle' : 'fas fa-microphone';
            const badge = isCloned ? '<div style="background: var(--success); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; margin-top: 10px;">Custom</div>' : '';
            
            card.innerHTML = `
                <div class="voice-preview">
                    <i class="${icon}"></i>
                </div>
                <h4>${voice.name}</h4>
                <p style="color: var(--text-muted); font-size: 0.9rem;">${voice.type || voice.quality} • ${voice.language || voice.accent}</p>
                ${badge}
                <button class="btn" style="margin-top: 15px; padding: 8px 16px; font-size: 0.8rem;" onclick="selectVoice('${voice.name}')">
                    <i class="fas fa-play"></i> Preview
                </button>
            `;
            
            card.addEventListener('click', () => {
                document.querySelectorAll('.voice-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
            });
            
            return card;
        }

        function selectVoice(voiceName) {
            // Simulate voice preview
            showStatus(`Previewing ${voiceName}...`, 'processing');
            setTimeout(() => {
                showStatus(`${voiceName} selected`, 'ready');
            }, 1500);
        }

        function saveSettings() {
            settings.enhancement = parseFloat(document.getElementById('enhancementSlider').value);
            settings.emotion = parseFloat(document.getElementById('emotionSlider').value);
            settings.breathing = parseFloat(document.getElementById('breathingSlider').value);
            settings.noise = parseFloat(document.getElementById('noiseSlider').value);
            settings.format = document.getElementById('outputFormat').value;
            settings.sampleRate = parseInt(document.getElementById('sampleRate').value);
            
            // Save to localStorage (simulated)
            localStorage.setItem('voiceCloneSettings', JSON.stringify(settings));
            showStatus('Settings saved successfully!', 'ready');
        }

        function resetSettings() {
            settings = {
                enhancement: 0.5,
                emotion: 0.3,
                breathing: 0.2,
                noise: 0.0,
                format: 'wav',
                sampleRate: 44100
            };
            
            // Update UI
            document.getElementById('enhancementSlider').value = settings.enhancement;
            document.getElementById('enhancementValue').textContent = settings.enhancement;
            document.getElementById('emotionSlider').value = settings.emotion;
            document.getElementById('emotionValue').textContent = settings.emotion;
            document.getElementById('breathingSlider').value = settings.breathing;
            document.getElementById('breathingValue').textContent = settings.breathing;
            document.getElementById('noiseSlider').value = settings.noise;
            document.getElementById('noiseValue').textContent = settings.noise;
            document.getElementById('outputFormat').value = settings.format;
            document.getElementById('sampleRate').value = settings.sampleRate;
            
            showStatus('Settings reset to default', 'ready');
        }

        // Utility functions
        function showStatus(message, type) {
            const indicator = document.getElementById('statusIndicator');
            indicator.textContent = message;
            indicator.className = `status-indicator status-${type}`;
        }

        function showCloneStatus(message, type) {
            const indicator = document.getElementById('cloneStatusIndicator');
            indicator.textContent = message;
            indicator.className = `status-indicator status-${type}`;
        }

        function showLoading(show) {
            const spinner = document.getElementById('loadingSpinner');
            spinner.style.display = show ? 'block' : 'none';
        }

        function showCloneLoading(show) {
            const spinner = document.getElementById('cloneLoadingSpinner');
            spinner.style.display = show ? 'block' : 'none';
        }

        function enableAudioControls(enabled) {
            document.getElementById('playBtn').disabled = !enabled;
            document.getElementById('pauseBtn').disabled = !enabled;
            document.getElementById('stopBtn').disabled = !enabled;
            document.getElementById('downloadBtn').disabled = !enabled;
        }

        function showWaveAnimation(show) {
            const animation = document.getElementById('waveAnimation');
            animation.style.display = show ? 'block' : 'none';
        }

        function updateProgress(percentage) {
            const progress = document.getElementById('audioProgress');
            progress.style.width = percentage + '%';
        }

        function updateCloneProgress(percentage) {
            const progress = document.getElementById('cloneProgress');
            progress.style.width = percentage + '%';
        }

        function updateMetrics() {
            document.getElementById('totalClones').textContent = clonedVoices.length;
            document.getElementById('totalAudio').textContent = Math.floor(Math.random() * 100) + 1;
            
            // Animate counter
            const counters = document.querySelectorAll('.metric-value');
            counters.forEach(counter => {
                counter.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 200);
            });
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        synthesizeSpeech();
                        break;
                    case ' ':
                        e.preventDefault();
                        if (speechSynthesis.speaking) {
                            pauseAudio();
                        } else {
                            playAudio();
                        }
                        break;
                }
            }
        });
    </script>
</body>
</html>
